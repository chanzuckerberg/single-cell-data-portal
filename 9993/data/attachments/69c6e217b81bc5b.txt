{"levelname": "INFO", "asctime": "2022-12-06T17:30:57.006Z", "name": "backend.portal.pipeline.processing.download", "message": "Setting up download.", "lineno": 172, "pathname": "/single-cell-data-portal/backend/portal/pipeline/processing/download.py"}
{"levelname": "INFO", "asctime": "2022-12-06T17:30:57.006Z", "name": "backend.portal.pipeline.processing.download", "message": "file_size: 1", "lineno": 173, "pathname": "/single-cell-data-portal/backend/portal/pipeline/processing/download.py"}
{"levelname": "INFO", "asctime": "2022-12-06T17:30:57.006Z", "name": "backend.portal.pipeline.processing.download", "message": "Starting download.", "lineno": 84, "pathname": "/single-cell-data-portal/backend/portal/pipeline/processing/download.py"}
{"levelname": "ERROR", "asctime": "2022-12-06T17:30:57.006Z", "name": "backend.portal.pipeline.processing.download", "message": "Upload failed: {'id': 'test_dataset_processing_status_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 890485), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 57, 90291), 'dataset_id': 'test_dataset_id', 'upload_status': <UploadStatus.FAILED: 'Failed'>, 'upload_progress': 4854.0, 'upload_message': 'The expected file size is smaller than the downloaded file size.', 'validation_status': <ValidationStatus.NA: 'N/A'>, 'validation_message': None, 'rds_status': <ConversionStatus.NA: 'N/A'>, 'cxg_status': <ConversionStatus.NA: 'N/A'>, 'h5ad_status': <ConversionStatus.NA: 'N/A'>, 'processing_status': <ProcessingStatus.PENDING: 'PENDING'>, 'dataset': {'id': 'test_dataset_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 868973), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 868978), 'published_at': None, 'revised_at': None, 'revision': 0, 'name': 'test_dataset_name', 'organism': [{'label': 'test_organism', 'ontology_term_id': 'test_obo'}], 'tissue': [{'label': 'test_tissue', 'ontology_term_id': 'test_obo'}], 'assay': [{'label': 'test_assay', 'ontology_term_id': 'test_obo'}], 'disease': [{'label': 'test_disease', 'ontology_term_id': 'test_obo'}, {'label': 'test_disease2', 'ontology_term_id': 'test_obp'}, {'label': 'test_disease3', 'ontology_term_id': 'test_obq'}], 'sex': [{'label': 'test_sex', 'ontology_term_id': 'test_obo'}, {'label': 'test_sex2', 'ontology_term_id': 'test_obp'}], 'self_reported_ethnicity': [{'label': 'test_ethnicity', 'ontology_term_id': 'test_obo'}], 'development_stage': [{'label': 'test_development_stage', 'ontology_term_id': 'test_obo'}], 'cell_type': [{'label': 'test_cell_type', 'ontology_term_id': 'test_opo'}], 'cell_count': None, 'donor_id': ['donor_1', 'donor_2'], 'suspension_type': ['nucleus'], 'is_valid': False, 'is_primary_data': <IsPrimaryData.PRIMARY: 'primary'>, 'collection_id': 'test_collection_id', 'tombstone': False, 'original_id': None, 'published': False, 'explorer_url': 'test_url', 'x_approximate_distribution': <XApproximateDistribution.NORMAL: 'normal'>, 'mean_genes_per_cell': 0.0, 'schema_version': '3.0.0', 'batch_condition': ['batchA', 'batchB'], 'collection': {'id': 'test_collection_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 856071), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 856080), 'published_at': None, 'revised_at': None, 'visibility': <CollectionVisibility.PUBLIC: 'Public'>, 'owner': 'test_user_id', 'name': 'test_collection_name', 'description': 'test_description', 'contact_name': 'Some Body', 'contact_email': 'somebody@chanzuckerberg.com', 'curator_name': '', 'data_submission_policy_version': '0', 'tombstone': False, 'publisher_metadata': None, 'revision_of': None, 'links': [{'id': 'test_collection_doi_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863707), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863712), 'collection_id': 'test_collection_id', 'link_name': 'test_doi_link_name', 'link_url': 'http://test_doi_url.place', 'link_type': <ProjectLinkType.DOI: 'doi'>}, {'id': 'test_collection_no_name_doi_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863713), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863715), 'collection_id': 'test_collection_id', 'link_name': None, 'link_url': 'http://test_no_link_name_doi_url.place', 'link_type': <ProjectLinkType.DOI: 'doi'>}, {'id': 'test_collection_raw_data_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863722), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863723), 'collection_id': 'test_collection_id', 'link_name': 'test_raw_data_link_name', 'link_url': 'http://test_raw_data_url.place', 'link_type': <ProjectLinkType.RAW_DATA: 'raw_data'>}, {'id': 'test_collection_no_name_raw_data_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863725), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863726), 'collection_id': 'test_collection_id', 'link_name': None, 'link_url': 'http://test_no_link_name_raw_data_url.place', 'link_type': <ProjectLinkType.RAW_DATA: 'raw_data'>}, {'id': 'test_collection_protocol_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863733), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863734), 'collection_id': 'test_collection_id', 'link_name': 'test_protocol_link_name', 'link_url': 'http://test_protocol_url.place', 'link_type': <ProjectLinkType.PROTOCOL: 'protocol'>}, {'id': 'test_collection_no_name_protocol_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863736), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863737), 'collection_id': 'test_collection_id', 'link_name': None, 'link_url': 'http://test_no_link_name_protocol_url.place', 'link_type': <ProjectLinkType.PROTOCOL: 'protocol'>}, {'id': 'test_collection_lab_website_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863744), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863745), 'collection_id': 'test_collection_id', 'link_name': 'test_lab_website_link_name', 'link_url': 'http://test_lab_website_url.place', 'link_type': <ProjectLinkType.LAB_WEBSITE: 'lab_website'>}, {'id': 'test_collection_no_name_lab_website_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863747), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863748), 'collection_id': 'test_collection_id', 'link_name': None, 'link_url': 'http://test_no_link_name_lab_website_url.place', 'link_type': <ProjectLinkType.LAB_WEBSITE: 'lab_website'>}, {'id': 'test_collection_other_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863755), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863756), 'collection_id': 'test_collection_id', 'link_name': 'test_other_link_name', 'link_url': 'http://test_other_url.place', 'link_type': <ProjectLinkType.OTHER: 'other'>}, {'id': 'test_collection_no_name_other_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863757), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863759), 'collection_id': 'test_collection_id', 'link_name': None, 'link_url': 'http://test_no_link_name_other_url.place', 'link_type': <ProjectLinkType.OTHER: 'other'>}, {'id': 'test_collection_data_source_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863765), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863766), 'collection_id': 'test_collection_id', 'link_name': 'test_data_source_link_name', 'link_url': 'http://test_data_source_url.place', 'link_type': <ProjectLinkType.DATA_SOURCE: 'data_source'>}, {'id': 'test_collection_no_name_data_source_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863768), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863769), 'collection_id': 'test_collection_id', 'link_name': None, 'link_url': 'http://test_no_link_name_data_source_url.place', 'link_type': <ProjectLinkType.DATA_SOURCE: 'data_source'>}], 'genesets': [{'id': 'test_geneset', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 898737), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 898741), 'name': 'test_geneset', 'description': 'this is a geneset', 'genes': None, 'collection_id': 'test_collection_id', 'linked_datasets': []}, {'id': 'test_geneset_with_dataset', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 902896), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 902900), 'name': 'test_geneset_with_dataset', 'description': 'this is a geneset with a dataset', 'genes': None, 'collection_id': 'test_collection_id', 'linked_datasets': ['test_dataset_id']}]}, 'artifacts': [{'id': 'test_dataset_artifact_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 875991), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 875996), 'dataset_id': 'test_dataset_id', 'filename': 'test_filename', 'filetype': <DatasetArtifactFileType.H5AD: 'h5ad'>, 'user_submitted': True, 's3_uri': 's3://bogus-bucket/test_s3_uri.h5ad'}, {'id': 'test_dataset_artifact_id_cxg', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 878059), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 878064), 'dataset_id': 'test_dataset_id', 'filename': 'test_filename', 'filetype': <DatasetArtifactFileType.CXG: 'cxg'>, 'user_submitted': True, 's3_uri': 's3://bogus-bucket/test_s3_uri.h5ad'}], 'linked_genesets': ['test_geneset_with_dataset']}}", "lineno": 212, "pathname": "/single-cell-data-portal/backend/portal/pipeline/processing/download.py"}
{"levelname": "INFO", "asctime": "2022-12-06T17:30:57.006Z", "name": "backend.portal.pipeline.processing.download", "message": "Setting up download.", "lineno": 172, "pathname": "/single-cell-data-portal/backend/portal/pipeline/processing/download.py"}
{"levelname": "INFO", "asctime": "2022-12-06T17:30:57.006Z", "name": "backend.portal.pipeline.processing.download", "message": "file_size: 10485760", "lineno": 173, "pathname": "/single-cell-data-portal/backend/portal/pipeline/processing/download.py"}
{"levelname": "INFO", "asctime": "2022-12-06T17:30:57.006Z", "name": "backend.portal.pipeline.processing.download", "message": "Starting download.", "lineno": 84, "pathname": "/single-cell-data-portal/backend/portal/pipeline/processing/download.py"}
{"levelname": "ERROR", "asctime": "2022-12-06T17:30:57.006Z", "name": "backend.portal.pipeline.processing.download", "message": "Upload failed: {'id': 'test_dataset_processing_status_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 890485), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 57, 137682), 'dataset_id': 'test_dataset_id', 'upload_status': <UploadStatus.FAILED: 'Failed'>, 'upload_progress': 0.00046291351318359373, 'upload_message': 'The expected file size is greater than the actual file size.', 'validation_status': <ValidationStatus.NA: 'N/A'>, 'validation_message': None, 'rds_status': <ConversionStatus.NA: 'N/A'>, 'cxg_status': <ConversionStatus.NA: 'N/A'>, 'h5ad_status': <ConversionStatus.NA: 'N/A'>, 'processing_status': <ProcessingStatus.PENDING: 'PENDING'>, 'dataset': {'id': 'test_dataset_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 868973), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 868978), 'published_at': None, 'revised_at': None, 'revision': 0, 'name': 'test_dataset_name', 'organism': [{'label': 'test_organism', 'ontology_term_id': 'test_obo'}], 'tissue': [{'label': 'test_tissue', 'ontology_term_id': 'test_obo'}], 'assay': [{'label': 'test_assay', 'ontology_term_id': 'test_obo'}], 'disease': [{'label': 'test_disease', 'ontology_term_id': 'test_obo'}, {'label': 'test_disease2', 'ontology_term_id': 'test_obp'}, {'label': 'test_disease3', 'ontology_term_id': 'test_obq'}], 'sex': [{'label': 'test_sex', 'ontology_term_id': 'test_obo'}, {'label': 'test_sex2', 'ontology_term_id': 'test_obp'}], 'self_reported_ethnicity': [{'label': 'test_ethnicity', 'ontology_term_id': 'test_obo'}], 'development_stage': [{'label': 'test_development_stage', 'ontology_term_id': 'test_obo'}], 'cell_type': [{'label': 'test_cell_type', 'ontology_term_id': 'test_opo'}], 'cell_count': None, 'donor_id': ['donor_1', 'donor_2'], 'suspension_type': ['nucleus'], 'is_valid': False, 'is_primary_data': <IsPrimaryData.PRIMARY: 'primary'>, 'collection_id': 'test_collection_id', 'tombstone': False, 'original_id': None, 'published': False, 'explorer_url': 'test_url', 'x_approximate_distribution': <XApproximateDistribution.NORMAL: 'normal'>, 'mean_genes_per_cell': 0.0, 'schema_version': '3.0.0', 'batch_condition': ['batchA', 'batchB'], 'collection': {'id': 'test_collection_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 856071), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 856080), 'published_at': None, 'revised_at': None, 'visibility': <CollectionVisibility.PUBLIC: 'Public'>, 'owner': 'test_user_id', 'name': 'test_collection_name', 'description': 'test_description', 'contact_name': 'Some Body', 'contact_email': 'somebody@chanzuckerberg.com', 'curator_name': '', 'data_submission_policy_version': '0', 'tombstone': False, 'publisher_metadata': None, 'revision_of': None, 'links': [{'id': 'test_collection_doi_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863707), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863712), 'collection_id': 'test_collection_id', 'link_name': 'test_doi_link_name', 'link_url': 'http://test_doi_url.place', 'link_type': <ProjectLinkType.DOI: 'doi'>}, {'id': 'test_collection_no_name_doi_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863713), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863715), 'collection_id': 'test_collection_id', 'link_name': None, 'link_url': 'http://test_no_link_name_doi_url.place', 'link_type': <ProjectLinkType.DOI: 'doi'>}, {'id': 'test_collection_raw_data_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863722), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863723), 'collection_id': 'test_collection_id', 'link_name': 'test_raw_data_link_name', 'link_url': 'http://test_raw_data_url.place', 'link_type': <ProjectLinkType.RAW_DATA: 'raw_data'>}, {'id': 'test_collection_no_name_raw_data_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863725), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863726), 'collection_id': 'test_collection_id', 'link_name': None, 'link_url': 'http://test_no_link_name_raw_data_url.place', 'link_type': <ProjectLinkType.RAW_DATA: 'raw_data'>}, {'id': 'test_collection_protocol_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863733), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863734), 'collection_id': 'test_collection_id', 'link_name': 'test_protocol_link_name', 'link_url': 'http://test_protocol_url.place', 'link_type': <ProjectLinkType.PROTOCOL: 'protocol'>}, {'id': 'test_collection_no_name_protocol_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863736), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863737), 'collection_id': 'test_collection_id', 'link_name': None, 'link_url': 'http://test_no_link_name_protocol_url.place', 'link_type': <ProjectLinkType.PROTOCOL: 'protocol'>}, {'id': 'test_collection_lab_website_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863744), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863745), 'collection_id': 'test_collection_id', 'link_name': 'test_lab_website_link_name', 'link_url': 'http://test_lab_website_url.place', 'link_type': <ProjectLinkType.LAB_WEBSITE: 'lab_website'>}, {'id': 'test_collection_no_name_lab_website_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863747), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863748), 'collection_id': 'test_collection_id', 'link_name': None, 'link_url': 'http://test_no_link_name_lab_website_url.place', 'link_type': <ProjectLinkType.LAB_WEBSITE: 'lab_website'>}, {'id': 'test_collection_other_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863755), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863756), 'collection_id': 'test_collection_id', 'link_name': 'test_other_link_name', 'link_url': 'http://test_other_url.place', 'link_type': <ProjectLinkType.OTHER: 'other'>}, {'id': 'test_collection_no_name_other_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863757), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863759), 'collection_id': 'test_collection_id', 'link_name': None, 'link_url': 'http://test_no_link_name_other_url.place', 'link_type': <ProjectLinkType.OTHER: 'other'>}, {'id': 'test_collection_data_source_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863765), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863766), 'collection_id': 'test_collection_id', 'link_name': 'test_data_source_link_name', 'link_url': 'http://test_data_source_url.place', 'link_type': <ProjectLinkType.DATA_SOURCE: 'data_source'>}, {'id': 'test_collection_no_name_data_source_link_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863768), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 863769), 'collection_id': 'test_collection_id', 'link_name': None, 'link_url': 'http://test_no_link_name_data_source_url.place', 'link_type': <ProjectLinkType.DATA_SOURCE: 'data_source'>}], 'genesets': [{'id': 'test_geneset', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 898737), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 898741), 'name': 'test_geneset', 'description': 'this is a geneset', 'genes': None, 'collection_id': 'test_collection_id', 'linked_datasets': []}, {'id': 'test_geneset_with_dataset', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 902896), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 902900), 'name': 'test_geneset_with_dataset', 'description': 'this is a geneset with a dataset', 'genes': None, 'collection_id': 'test_collection_id', 'linked_datasets': ['test_dataset_id']}]}, 'artifacts': [{'id': 'test_dataset_artifact_id', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 875991), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 875996), 'dataset_id': 'test_dataset_id', 'filename': 'test_filename', 'filetype': <DatasetArtifactFileType.H5AD: 'h5ad'>, 'user_submitted': True, 's3_uri': 's3://bogus-bucket/test_s3_uri.h5ad'}, {'id': 'test_dataset_artifact_id_cxg', 'created_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 878059), 'updated_at': datetime.datetime(2022, 12, 6, 17, 30, 56, 878064), 'dataset_id': 'test_dataset_id', 'filename': 'test_filename', 'filetype': <DatasetArtifactFileType.CXG: 'cxg'>, 'user_submitted': True, 's3_uri': 's3://bogus-bucket/test_s3_uri.h5ad'}], 'linked_genesets': ['test_geneset_with_dataset']}}", "lineno": 212, "pathname": "/single-cell-data-portal/backend/portal/pipeline/processing/download.py"}
