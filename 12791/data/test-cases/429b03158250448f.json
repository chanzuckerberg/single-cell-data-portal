{"uid":"429b03158250448f","name":"test__rollup_without_compare_dimension","fullName":"tests.unit.backend.wmg.api.test_expression_rollup.TestHighLevelRollupFunctionWithoutCompareDimension#test__rollup_without_compare_dimension","historyId":"5a5d41d9c17d92aa16d1ea5d9f6160cf","time":{"start":1683836129422,"stop":1683836134813,"duration":5391},"description":"\n        Test that the `rollup` function correctly accumulates (or rolls up) gene-expression\n        values FOR EACH expressed gene and cell count values up the cell type ANCESTOR paths\n        grouped by (tissue_ontology_term_id, cell_type_ontology_term_id).\n\n        The input:\n\n        1. A cell type ontology subgraph consisting of 4 cell types.\n        2. 2 tissues.\n        3. 2 genes.\n        4. A gene expression dataframe consisting of expression numeric values for each\n        (gene_ontology_term_id, tissue_ontology_term_id, cell_type_ontology_term_id) tuple.\n        5. The gene expression datafram also holds total cell counts per tissue_ontology_term_id.\n        This value is held in a column called `n_cells_tissue`.\n        6. A cell counts dataframe that consists of cell counts for each\n        (tissue_ontology_term_id, cell_type_ontology_term_id) tuple.\n        7. We set the `n_cells_tissue` column values to 10_000_000 for all rows\n        in the gene expression dataframe.\n        8. We set all other numeric column values to `1` in the gene expression dataframe.\n\n        The expected output:\n\n        1. A rolled up gene expression dataframe.\n        2. A rolled up cell counts dataframe.\n        3. Assert that `n_cells_tissue` column value in the rolled up gene expression dataframe\n        does not change for all rows because it should not be rolled up the cell type ontology\n        ancestor paths.\n        4. Assert that other numeric column values (i.e the columns that are not `n_cells_tissue`)\n        in the rolled up gene expression dataframe hold the correct rolled up values.\n        5. Assert that the cell counts in the rolled up cell counts dataframe hold the correct\n        rolled up values.\n        ","descriptionHtml":"<pre><code>    Test that the `rollup` function correctly accumulates (or rolls up) gene-expression\n    values FOR EACH expressed gene and cell count values up the cell type ANCESTOR paths\n    grouped by (tissue_ontology_term_id, cell_type_ontology_term_id).\n\n    The input:\n\n    1. A cell type ontology subgraph consisting of 4 cell types.\n    2. 2 tissues.\n    3. 2 genes.\n    4. A gene expression dataframe consisting of expression numeric values for each\n    (gene_ontology_term_id, tissue_ontology_term_id, cell_type_ontology_term_id) tuple.\n    5. The gene expression datafram also holds total cell counts per tissue_ontology_term_id.\n    This value is held in a column called `n_cells_tissue`.\n    6. A cell counts dataframe that consists of cell counts for each\n    (tissue_ontology_term_id, cell_type_ontology_term_id) tuple.\n    7. We set the `n_cells_tissue` column values to 10_000_000 for all rows\n    in the gene expression dataframe.\n    8. We set all other numeric column values to `1` in the gene expression dataframe.\n\n    The expected output:\n\n    1. A rolled up gene expression dataframe.\n    2. A rolled up cell counts dataframe.\n    3. Assert that `n_cells_tissue` column value in the rolled up gene expression dataframe\n    does not change for all rows because it should not be rolled up the cell type ontology\n    ancestor paths.\n    4. Assert that other numeric column values (i.e the columns that are not `n_cells_tissue`)\n    in the rolled up gene expression dataframe hold the correct rolled up values.\n    5. Assert that the cell counts in the rolled up cell counts dataframe hold the correct\n    rolled up values.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_unittest_setUpClass_fixture_TestHighLevelRollupFunctionWithoutCompareDimension","time":{"start":1683836129422,"stop":1683836129422,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"afterStages":[{"name":"_unittest_setUpClass_fixture_TestHighLevelRollupFunctionWithoutCompareDimension::0","time":{"start":1683836134814,"stop":1683836134814,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"labels":[{"name":"parentSuite","value":"tests.unit.backend.wmg.api"},{"name":"suite","value":"test_expression_rollup"},{"name":"subSuite","value":"TestHighLevelRollupFunctionWithoutCompareDimension"},{"name":"host","value":"be37207d6f0b"},{"name":"thread","value":"1-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.unit.backend.wmg.api.test_expression_rollup"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"429b03158250448f.json","parameterValues":[]}