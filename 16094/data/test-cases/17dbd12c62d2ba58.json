{"uid":"17dbd12c62d2ba58","name":"test__add_missing_combinations_to_gene_expression_df_for_rollup","fullName":"tests.unit.backend.wmg.api.common.test_rollup.TestHighLevelRollupHelperFunctions#test__add_missing_combinations_to_gene_expression_df_for_rollup","historyId":"c79831c57eaf87a683382edb51f43a00","time":{"start":1696517047307,"stop":1696517047341,"duration":34},"description":"\n        test that the `_add_missing_combinations_to_gene_expression_df_for_rollup` function works as expected\n        this function is used to add missing (tissue, cell type) combinations to the expression dataframe\n        so that the expression dataframe can be rolled up correctly.\n\n        the cell counts dataframe has 100 cell types, 60 of which have expression data\n        the goal of this test is to make sure that `_add_missing_combinations_to_gene_expression_df_for_rollup`\n        adds the missing (tissue, cell type) combinations for each gene to th expression dataframe.\n\n        there will be (100 cell types) * (2 tissues) = 200 rows in the cell counts dataframe\n        there will be (60 cell types) * (2 tissues) * (3 genes) = 360 rows in the expression dataframe\n        there will be (100 cell types) * (2 tissues) * (3 genes) = 600 rows in the expected expression dataframe\n\n\n        the input expression dataframe will have 1 for all numeric columns, excluding n_cells_tissue.\n        because we don't want to roll up the n_cells_tissue column, we set it to 100 for all rows and check\n        that it stays 100 after adding the missing combinations.\n\n        the expected expression dataframe will have the same rows as the input dataframe, with new rows added\n        that have 0 for all numeric columns, excluding n_cells_tissue, which stays 100.\n        ","descriptionHtml":"<pre><code>    test that the `_add_missing_combinations_to_gene_expression_df_for_rollup` function works as expected\n    this function is used to add missing (tissue, cell type) combinations to the expression dataframe\n    so that the expression dataframe can be rolled up correctly.\n\n    the cell counts dataframe has 100 cell types, 60 of which have expression data\n    the goal of this test is to make sure that `_add_missing_combinations_to_gene_expression_df_for_rollup`\n    adds the missing (tissue, cell type) combinations for each gene to th expression dataframe.\n\n    there will be (100 cell types) * (2 tissues) = 200 rows in the cell counts dataframe\n    there will be (60 cell types) * (2 tissues) * (3 genes) = 360 rows in the expression dataframe\n    there will be (100 cell types) * (2 tissues) * (3 genes) = 600 rows in the expected expression dataframe\n\n\n    the input expression dataframe will have 1 for all numeric columns, excluding n_cells_tissue.\n    because we don't want to roll up the n_cells_tissue column, we set it to 100 for all rows and check\n    that it stays 100 after adding the missing combinations.\n\n    the expected expression dataframe will have the same rows as the input dataframe, with new rows added\n    that have 0 for all numeric columns, excluding n_cells_tissue, which stays 100.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"patch_all","time":{"start":1696516859871,"stop":1696516859872,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_unittest_setUpClass_fixture_TestHighLevelRollupHelperFunctions","time":{"start":1696517047306,"stop":1696517047306,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"afterStages":[{"name":"_unittest_setUpClass_fixture_TestHighLevelRollupHelperFunctions::0","time":{"start":1696517047341,"stop":1696517047341,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"parentSuite","value":"tests.unit.backend.wmg.api.common"},{"name":"suite","value":"test_rollup"},{"name":"subSuite","value":"TestHighLevelRollupHelperFunctions"},{"name":"host","value":"18554d33c8bb"},{"name":"thread","value":"1-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.unit.backend.wmg.api.common.test_rollup"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":1564,"unknown":0,"total":1564},"items":[{"uid":"505bf27d6798026d","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/16090//#testresult/505bf27d6798026d","status":"passed","time":{"start":1696477031669,"stop":1696477031715,"duration":46}},{"uid":"7545aec6fde35435","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/16089//#testresult/7545aec6fde35435","status":"passed","time":{"start":1696477053730,"stop":1696477053774,"duration":44}},{"uid":"f2a054068f92707e","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/16091//#testresult/f2a054068f92707e","status":"passed","time":{"start":1696477027665,"stop":1696477027699,"duration":34}},{"uid":"5a2d7a8a9d743f1","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/16087//#testresult/5a2d7a8a9d743f1","status":"passed","time":{"start":1696466322014,"stop":1696466322050,"duration":36}},{"uid":"74aad8386770ca3a","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/16028//#testresult/74aad8386770ca3a","status":"passed","time":{"start":1696381713458,"stop":1696381713502,"duration":44}},{"uid":"2d5533763cdf0b00","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/16027//#testresult/2d5533763cdf0b00","status":"passed","time":{"start":1696380237885,"stop":1696380237920,"duration":35}},{"uid":"d624b06a08d57d2a","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/16025//#testresult/d624b06a08d57d2a","status":"passed","time":{"start":1696378189948,"stop":1696378189981,"duration":33}},{"uid":"2246a71f6cdd4cf5","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/16024//#testresult/2246a71f6cdd4cf5","status":"passed","time":{"start":1696378162451,"stop":1696378162501,"duration":50}},{"uid":"5cc2c1dca7cd0d6b","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/15984//#testresult/5cc2c1dca7cd0d6b","status":"passed","time":{"start":1696287595922,"stop":1696287595978,"duration":56}},{"uid":"160a8852aa8636af","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/15982//#testresult/160a8852aa8636af","status":"passed","time":{"start":1696287462233,"stop":1696287462268,"duration":35}},{"uid":"338e99a71308fb7a","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/15979//#testresult/338e99a71308fb7a","status":"passed","time":{"start":1696285646036,"stop":1696285646071,"duration":35}},{"uid":"23a93b06ea41a963","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/15978//#testresult/23a93b06ea41a963","status":"passed","time":{"start":1696285170693,"stop":1696285170729,"duration":36}},{"uid":"dfc021a5a056d1a1","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/15977//#testresult/dfc021a5a056d1a1","status":"passed","time":{"start":1696282657602,"stop":1696282657638,"duration":36}},{"uid":"2ee526cae085b6e","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/15974//#testresult/2ee526cae085b6e","status":"passed","time":{"start":1696281416126,"stop":1696281416159,"duration":33}},{"uid":"4e9f2b1ce892326c","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/15970//#testresult/4e9f2b1ce892326c","status":"passed","time":{"start":1696279614638,"stop":1696279614674,"duration":36}},{"uid":"1978640f171633bd","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/15962//#testresult/1978640f171633bd","status":"passed","time":{"start":1696276458788,"stop":1696276458825,"duration":37}},{"uid":"55c6f3efa35b92f7","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/15945//#testresult/55c6f3efa35b92f7","status":"passed","time":{"start":1696051281662,"stop":1696051281699,"duration":37}},{"uid":"9894d59d31de7574","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/15944//#testresult/9894d59d31de7574","status":"passed","time":{"start":1696051224147,"stop":1696051224181,"duration":34}},{"uid":"3fff2f4d53a99e87","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/15943//#testresult/3fff2f4d53a99e87","status":"passed","time":{"start":1696050302925,"stop":1696050302967,"duration":42}},{"uid":"1d44988cc161655f","reportUrl":"https://chanzuckerberg.github.io/single-cell-data-portal/15942//#testresult/1d44988cc161655f","status":"passed","time":{"start":1696050230576,"stop":1696050230609,"duration":33}}]},"tags":[]},"source":"17dbd12c62d2ba58.json","parameterValues":[]}